# AI Agent

## 一、什么是 AI Agent？

AI Agent 是一种应用程序，其核心功能是通过观察环境并运用工具采取行动，以实现特定目标。它们具备以下关键特征：

- **自主性（Autonomy）**：能够自主运作，无需人类直接干预，独立完成任务。
- **目标导向（Goal-Oriented）**：行动和决策围绕实现特定目标设计。
- **主动性（Proactiveness）**：即使没有明确指令，也能推理分析，决定下一步行动。
- **广泛应用**：尤其在生成式 AI 模型构建的系统中表现突出。

简言之，AI Agent 是具备智能决策和执行能力的自主系统，能够结合内外部资源完成复杂任务。

---

### 生成式人工智能应用需要经历的5个层级

| 层级                 | 描述                                                                                             | 示例                                         |
| -------------------- | ------------------------------------------------------------------------------------------------ | -------------------------------------------- |
| L1 Tool (工具)       | 人类完成所有工作，没有任何明显的AI辅助                                                                 | Excel、Photoshop、MATLAB和AutoCAD等绝大多数应用 |
| L2 Chatbot (聊天机器人) | 人类直接完成绝大部分工作。人类向AI询问，了解信息。AI提供信息和建议，但不直接处理工作                                           | 初代ChatGPT                                  |
| L3 Copilot (协同)    | 人类和AI共同工作，工作量相当。AI根据人类要求完成工作初稿，人类进行后期校正、修改和调整，并最终确认                                     | GitHub Copilot、Microsoft Copilot          |
| L4 Agent             | AI完成绝大部分工作，人类负责设定目标、提供资源和监督结果，以及最终决策。AI进行任务拆分、工具选择、进度控制，实现目标后自主结束工作                 | AutoGPT、BabyAGI、MetaGPT                   |
| L5 Intelligence (智能) | 完全无须人类监督，AI自主拆解目标、寻找资源、选择并使用工具，完成全部工作，人类只需给出初始目标                                       | 冯·诺伊曼机器人或者……人？                       |


### Agent的工作：
- 感知环境
  - 语言
  - 多模态

- 做出决策
	- 记忆
      - RAG/知识库
	- 思考/决策

- 采取行动
  - 语言输出
  - 工具使用


## 二、AI Agent 的组成部分及功能

AI Agent 的核心组成部分主要包括三大模块：

### 1. 模型（The Model）

- **功能**：AI Agent 的“大脑”，负责理解指令、推理和决策。
- **特点**：
  - 通常由大型语言模型（如 GPT-3 等）构成。
  - 采用推理框架（如 ReAct、Chain-of-Thought、Tree-of-Thoughts）提升理解和解决问题的能力。
  - 可通过微调（Fine-Tuning）适应特定任务。


  - **作用**：决定 Agent 的判断力和推理能力，是智能核心。

### 2. 工具（The Tools）

- **功能**：连接 AI Agent 与外部世界的桥梁，弥补语言模型无法直接操作外部系统的不足。
- **类型**：
  - **扩展（Extensions）**：标准化连接 API，允许 Agent 无缝调用外部服务。
  - **函数（Functions）**：模型输出函数及参数，由客户端执行，提供更细致的控制。
  - **数据存储（Data Stores）**：如向量数据库，存储动态更新的信息供 Agent 访问。


  - **作用**：使 Agent 能够访问实时信息、执行外部操作，扩展其能力边界。

### 3. 编排层（The Orchestration Layer）

- **功能**：Agent 的指挥中心，负责信息接收、内部推理、规划和行动决策。
- **特点**：
  - 维持记忆、状态和推理流程。
  - 利用提示工程（Prompt Engineering）引导推理和行动。
  - 支持多种推理框架，如：
    - **ReAct**：边推理边行动。
    - **Chain-of-Thought (CoT)**：多步推理。
    - **Tree-of-Thoughts (ToT)**：适合探索和策略预测。


  - **作用**：确保 Agent 按计划执行任务，协调模型与工具的协作。

---

## 三、AI Agent 基本的基本工作原理示意图

![](https://cdn.jsdelivr.net/gh/lvsoso/rnotes@main/img/2025-05-11-13-03-27.png)

```
+-------------------+
|      模型          |  <-- 负责推理与决策
+-------------------+
          |
          v
+-------------------+
|    编排层          |  <-- 规划、控制、协调模型与工具
+-------------------+
          |
          v
+-------------------+
|      工具          |  <-- 连接外部世界，执行具体操作
+-------------------+
```

---

## 四、AI Agent 的认知架构运作步骤

![](https://cdn.jsdelivr.net/gh/lvsoso/rnotes@main/img/2025-05-11-13-03-51.png)

1. **信息收集**：Agent 收集用户查询及可用工具信息。
2. **内部推理**：基于收集信息进行分析，评估可行方案。
3. **采取行动**：调用工具或生成响应，执行任务。
4. **调整优化**：根据反馈调整计划，持续迭代直至完成目标。

---

## 五、模型与 Agent 的区别

| 方面 | 模型（Model） | Agent |
| --- | --- | --- |
| 知识来源 | 仅限训练数据 | 可扩展至外部工具和实时信息 |
| 会话管理 | 无多轮对话管理 | 支持多轮对话和上下文维护 |
| 推理能力 | 依赖单一推理框架 | 内建多种推理框架，支持复杂任务 |
| 外部交互 | 无法直接操作外部系统 | 可调用工具与外部系统交互 |
| 任务复杂度 | 适合简单任务 | 适合动态复杂任务 |

---

## 六、Workflow 和 Agent 的区别

### 定义对比

**Agent（智能体）**

指由大语言模型（LLM）动态控制自身流程和工具使用的系统。Agent根据环境反馈（如工具调用结果）在循环中自主决策如何完成任务，具有较高的自主性和灵活性。
简单来说，Agent是`“模型驱动”`的，模型在执行过程中保持控制权，动态决定下一步动作。

**Workflow（工作流）**

指通过预定义代码路径来编排LLM和工具的系统。工作流的流程是确定性的，模型执行的步骤和工具调用顺序由开发者事先设计好，模型控制权较弱。
工作流更像是`“流程驱动”`的，强调可预测性和一致性。

---


### 优势劣势对比

| 特性     | Agent优势                                  | Agent劣势                                    | Workflow优势                             | Workflow劣势                                   |
| -------- | ------------------------------------------ | -------------------------------------------- | ---------------------------------------- | ---------------------------------------------- |
| 灵活性   | 高，能处理开放式、复杂、不可预测的任务         | 复杂度高，难以保证稳定性和可靠性             | 流程明确，易于调试和维护                   | 灵活性低，难以应对动态变化                       |
| 控制权   | 模型自主决策，适合需要模型推理和规划的场景     | 可能产生累积错误，需严格测试和监控           | 流程由代码控制，执行可预测                 | 依赖预定义路径径，难以适应新情况                 |
| 成本与性能 | 可能成本高，延迟大                           | 需要更多计算资源和复杂的上下文管理         | 通常更高效，成本较低                       | 可能无法充分利用模型的推理能力                   |
| 适用复杂度 | 适合复杂、开放式、多步骤任务                 | 实现难度大，调试复杂                         | 适合明确、重复、规则清晰的任务               | 不适合任务步骤不确定或需动态决策的场景           |
| 可靠性   | 依赖模型表现，可能不稳定                     | 需要大量测试和安全措施                       | 流程稳定，易于保证一致性                   | 受限于预定义流程，灵活性不足                     |


---


### 适用场景

**Agent适用场景**

- 任务步骤难以预先确定，需模型动态规划和决策的开放式问题
- 需要模型多轮推理、规划、错误恢复的复杂任务
- 需要结合环境反馈（如工具调用结果）动态调整策略

例如：复杂的客户支持代理、代码自动修改、多步骤信息检索与分析等

**Workflow适用场景**

- 任务流程明确、步骤固定、可预定义的场景
- 追求高效、低成本、稳定执行的业务流程
- 适合简单的分类路由、标准化操作、重复性任务

例如：客户请求分类路由、简单问答系统、固定流程审批等

---


## 七、总结

- AI Agent 是结合大型语言模型、外部工具和智能指挥层的自主系统，能够自主推理、规划并执行复杂任务。通过模型的智能决策、工具的外部交互能力和指挥层的协调控制，Agent 展现出强大的适应性和执行力，广泛应用于生成式 AI 领域及实际生产环境。

- Agent和Workflow不是互斥关系，实际系统中常常结合使用，形成混合的agentic系统。
Anthropic和OpenAI均建议优先选择最简单的解决方案，只有在需要灵活性和模型驱动决策时才采用Agent。

- Workflow提供可预测性和一致性，Agent提供灵活性和自主性。

- 构建可靠Agent的难点在于确保模型在每一步拥有合适的上下文和反馈，避免错误累积。

- 选择时应权衡任务复杂度、成本、性能和可靠性需求。