### base 

分类：依靠特征进行区分，类别越多，需要的特征越多；

向量：一组数字，一组特征就可以组成向量；

坐标：向量的特征值，指向了一个特定的事物；


相似搜索：搜索一组坐标相差不大的值；


对这些特定事物进行划分、归类 -> 分类


#### 向量查询

速度、质量、内存

最近邻算法、近似最近邻算法

速度 和 质量成反比




全量比较：
- 余弦
- 欧氏距离

分范围查找：
- kmeans 
  - 最终计算出分类的中心点；
  - 搜索时在相似的中心点范围内查找；
  - 通过增加分类数量减少遗漏；
  - 搜索相邻几个分类减少遗漏；

- 位置敏感hash：
  - 通过hash来对向量分类，碰撞率高，分出多个bucket，按bucket查找
  - 计算方式：
    - 随机多个向量对数据进行二分，构造多位这样的0，1组合
    - 相较于全匹配比较hash，可以通过对hash分段，按照段的匹配度来合理的找到范围

#### 向量存储

128 * 32 bit * 10000000= 4096 bit * 10000000 = 512 byte * 10000000 ～= 4.77GB
  
乘积量化（PQ）
- 横向切分，找出代表性的点。
- 查找：向量-> 编码代号 -> 向量值
  - 码本：编码代号 -> 向量值
    - 维度多的情况下，码本也占空间 -> 维度灾难
  - 降维：
    - 分成多个子向量空间
    - 存在一组低维的码本
    - 一个向量计算出8个低维度子向量值分别进行查找
    - 128 维度 ->  8 * 16 维  -> 8个子码本
    - 10000000  * 8 byte ～= 76MB



分层导航小世界（HNSW）

德劳内三角剖分法：
- 每个点都有直接连接友节点
- 如果两个点之间的距离到达一定程度，一定要连起来形成友好节点的关系
- 在这个基础上保持连线最少

NSW： 依次给每个点进行创建连接，搜索先粗快，后细慢

HNSW：立体跳表？占内存